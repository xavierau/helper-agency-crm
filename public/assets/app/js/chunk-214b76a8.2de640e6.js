(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-214b76a8"],{"2ef8":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ContractShow"},[t.contract?n("CCard",[n("CCardHeader",{staticClass:"d-flex justify-content-between align-content-center"},[n("h5",{staticClass:"m-0"},[t._v(" Contract: "+t._s(t.contract.contract_number)+" "),n("small",[n("span",{staticClass:"badge badge-success"},[t._v(t._s(t.contract.internal_code))]),t._v(" ("+t._s(t.contract.type.label)+")("+t._s(t.contract.status)+")")]),n("a",{staticClass:"btn btn-info btn-sm mx-1",attrs:{target:"_blank",href:"/contracts/"+t.contract.id+"/agreement"}},[t._v("Print Agreement ")]),n("a",{staticClass:"btn btn-info btn-sm mx-1",attrs:{target:"_blank",href:"/contracts/"+t.contract.id+"/job_memo"}},[t._v("Print Job memo ")]),t.contract&&t.contract.invoice?n("router-link",{staticClass:"mr-1 btn btn-info btn-sm",attrs:{to:{name:"Invoice",params:{id:t.contract.invoice.id}}}},[t._v(" Invoice ")]):t._e(),t.contract&&t.contract.invoice?n("router-link",{staticClass:"mr-1 btn btn-info btn-sm",attrs:{to:{name:"Payments",query:{invoice_id:t.contract.invoice.id}}}},[t._v(" Add Payment ")]):t._e(),n("button",{staticClass:"btn btn-success btn-sm",on:{click:function(e){t.show_upload_documents=!0}}},[t._v("Uploaded Document ")])],1),n("div",t._l(t.contract.transitions,(function(e){return n("button",{key:e.id,staticClass:"mr-1 btn btn-info btn-sm",on:{click:function(n){return t.applyTransition(e)}}},[t._v(" "+t._s(e.label)+" ")])})),0)]),n("CCardBody",[n("div",{staticClass:"row"},[n("ClientBasicInfo",{staticClass:"col-md-6",attrs:{client:t.contract.client}}),n("ApplicantBasicInfo",{staticClass:"col-md-6",attrs:{applicant:t.contract.applicant}})],1),n("div",{staticClass:"row mt-3"},[n("DateList",{staticClass:"col-md-6",attrs:{dates:t.contract.type.contract_dates,"selected-dates":t.contract.dates,"can-update-contract":t.canUpdateContract},on:{"update-date":t.updateDate,"add-date":t.addDate}}),n("DocumentList",{staticClass:"col-md-6",attrs:{documents:t.contract.type.contract_documents,"contract-id":t.contract.id,"can-update-contract":t.canUpdateContract,"selected-documents":t.contract.documents},on:{"file-uploaded":t.fetchContract,"add-document":t.addDocument,"file-deleted":t.fetchContract}}),n("div",{staticClass:"col-12"}),n("CButton",{staticClass:"mb-2 btn-block",attrs:{color:"info"},on:{click:function(e){t.show_contract_address_and_residents=!t.show_contract_address_and_residents}}},[t._v(" "+t._s(t.show_contract_address_and_residents?"Hide Contract Address and Residents":"Show Contract Address and Residents")+" ")]),n("CCollapse",{staticClass:"col-12",attrs:{show:t.show_contract_address_and_residents}},[n("SelectContractAddress",{staticClass:"col-12",attrs:{contract:t.contract,"can-update-contract":t.canUpdateContract},on:{"update:contract":function(e){t.contract=e},"address-changed":function(e){return t.updateContract()}}}),n("SelectContractResidents",{staticClass:"col-12",attrs:{contract:t.contract,"can-update-contract":t.canUpdateContract},on:{"update:contract":function(e){t.contract=e}}})],1),n("CButton",{staticClass:"mb-2 btn-block",attrs:{color:"info"},on:{click:function(e){t.show_requirement_section=!t.show_requirement_section}}},[t._v(" "+t._s(t.show_requirement_section?"Hide Job Requirement":"Show Job Requirement")+" ")]),n("CCollapse",{staticClass:"col-12",attrs:{show:t.show_requirement_section}},[n("RequirementInfo",{staticClass:"mb-3",attrs:{"hidden-inputs":t.hiddenJobRequirmentInputs,"disabled-inputs":["expected_arrival_date"],url:t.updateRequirementUrl,requirement:t.contract.requirement},on:{"update:requirement":function(e){return t.$set(t.contract,"requirement",e)}}})],1),n("CButton",{staticClass:"mb-2 btn-block",attrs:{color:"info"},on:{click:function(e){t.show_contract_detail=!t.show_contract_detail}}},[t._v(" "+t._s(t.show_contract_detail?"Hide Contract Info":"Show Contract Info")+" ")]),n("CCollapse",{staticClass:"col-12",attrs:{show:t.show_contract_detail}},[n("div",{staticClass:"col-12"},[n("div",{staticClass:"form-group"},[n("label",[t._v("Salary")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.contract.salary,expression:"contract.salary"}],staticClass:"form-control",attrs:{type:"number"},domProps:{value:t.contract.salary},on:{input:function(e){e.target.composing||t.$set(t.contract,"salary",e.target.value)}}})]),n("div",{staticClass:"form-group"},[n("label",[t._v("Food Subsidy")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.contract.food_subsidy,expression:"contract.food_subsidy"}],staticClass:"form-control",attrs:{type:"number"},domProps:{value:t.contract.food_subsidy},on:{input:function(e){e.target.composing||t.$set(t.contract,"food_subsidy",e.target.value)}}})]),n("div",{staticClass:"form-group"},[n("label",[t._v("Special Request 1")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.contract.special_request_1,expression:"contract.special_request_1"}],staticClass:"form-control",attrs:{type:"number"},domProps:{value:t.contract.special_request_1},on:{input:function(e){e.target.composing||t.$set(t.contract,"special_request_1",e.target.value)}}})]),n("div",{staticClass:"form-group"},[n("label",[t._v("Special Request 2")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.contract.special_request_1,expression:"contract.special_request_1"}],staticClass:"form-control",attrs:{type:"number"},domProps:{value:t.contract.special_request_1},on:{input:function(e){e.target.composing||t.$set(t.contract,"special_request_1",e.target.value)}}})]),n("div",{staticClass:"form-group"},[n("label",[t._v("Special Request 3")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.contract.special_request_1,expression:"contract.special_request_1"}],staticClass:"form-control",attrs:{type:"number"},domProps:{value:t.contract.special_request_1},on:{input:function(e){e.target.composing||t.$set(t.contract,"special_request_1",e.target.value)}}})])])])],1)])],1):n("CCard",{staticClass:"text-center"},[n("h2",{staticClass:"p-3"},[t._v("Loding...")])]),n("CModal",{attrs:{show:t.show_upload_documents,title:"Uploaded Documents",size:"lg"},on:{"update:show":function(e){t.show_upload_documents=e}},scopedSlots:t._u([{key:"footer",fn:function(){return[n("div")]},proxy:!0}])},[n("ContractUploadedDocuments",{attrs:{"contract-id":parseInt(t.$route.params.id)}})],1)],1)},s=[],o=n("4d66"),r=n("7ed9"),i=n("4a7a"),c=n.n(i),d=(n("6dfc"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"DocumentList"},[n("h4",[t._v("Documents "),t.canUpdateContract?n("button",{staticClass:"btn btn-success btn-sm btn-icon",on:{click:function(e){t.showModal=!0}}},[n("i",{staticClass:"fa fa-plus"})]):t._e()]),n("table",{staticClass:"table"},[n("thead",[n("tr",[n("th",[t._v("Name")]),n("th",[t._v("File Name")]),t.canUpdateContract?n("th",[t._v("Actions")]):t._e()])]),n("tbody",t._l(t.displayed_documents,(function(e){return n("DocumentTableRow",{attrs:{document:e,"can-update-contract":t.canUpdateContract},on:{"upload-file":function(n){return t.uploadFile(e)},"remove-file":t.removeFile}})})),1)]),n("CModal",{attrs:{title:"Add Document",size:"lg",show:t.showModal},on:{"update:show":function(e){t.showModal=e}},scopedSlots:t._u([{key:"footer",fn:function(){return[n("button",{staticClass:"btn btn-success",on:{click:t.addDocument}},[t._v("Add")])]},proxy:!0}])},[n("v-select",{attrs:{reduce:function(t){return t.id},options:t.can_be_added_documents,label:"label"},model:{value:t.formData.document_id,callback:function(e){t.$set(t.formData,"document_id",e)},expression:"formData.document_id"}})],1),n("CModal",{attrs:{size:"lg",title:"Add file",show:t.showFileUploadModal},on:{"update:show":function(e){t.showFileUploadModal=e}},scopedSlots:t._u([{key:"footer",fn:function(){return[n("button",{staticClass:"btn btn-secondary",on:{click:function(e){t.showFileUploadModal=!1}}},[t._v("Close")])]},proxy:!0}])},[t.showFileUploadModal?n("Dropzone",{attrs:{url:t.fileUploadUrl,options:t.uploadFileOptions},on:{success:t.fileUploadSuccess}}):t._e()],1)],1)}),u=[],l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("tr",[n("td",[t._v(t._s(t.document.label))]),n("td",[t.hasUploadFile?n("a",{staticClass:"btn btn-primary btn-sm btn-icon",attrs:{target:"_blank",href:"/contracts/"+t.document.doc.contract_id+"/documents/"+t.document.id}},[t._v(" Show ")]):n("CButton",{attrs:{color:"info",size:"sm"},on:{click:t.uploadFile}},[t._v(" Upload File ")])],1),t.canUpdateContract?n("td",[n("button",{staticClass:"btn btn-sm btn-icon btn-danger",on:{click:function(e){return t.$emit("remove-file",t.document)}}},[n("i",{staticClass:"fas fa-trash-alt"})])]):t._e()])},m=[],p={name:"DocumentTableRow",props:{document:{type:Object,required:!0},canUpdateContract:{type:Boolean,required:!0}},computed:{hasUploadFile:function(){var t;return!(null===(t=this.document.doc)||void 0===t||!t.value)}},methods:{uploadFile:function(){this.$emit("upload-file")}}},f=p,v=n("2877"),b=Object(v["a"])(f,l,m,!1,null,"67d1f096",null),h=b.exports,C=n("c53a"),g={name:"DocumentList",components:{vSelect:c.a,DocumentTableRow:h,Dropzone:C["a"]},props:{contractId:{type:Number},documents:{type:Array,required:!0},selectedDocuments:{type:Array,required:!0},canUpdateContract:{type:Boolean,required:!0}},data:function(){return{showModal:!1,showFileUploadModal:!1,selectedDocument:null,uploadFileOptions:{maxFile:1},formData:{document_id:null}}},computed:{displayed_documents:function(){var t=this;return this.documents.map((function(e){var n;return null!==(n=t.findSelectedDocument(e))&&void 0!==n?n:e.assignment.is_required?e:null})).filter((function(t){return null!==t}))},can_be_added_documents:function(){var t=this;return this.documents.filter((function(e){return!t.inSelectedDocuments(e)&&!1===e.assignment.is_required}))},fileUploadUrl:function(){return o["a"].update_contract_document(this.contractId)}},methods:{findSelectedDocument:function(t){return this.selectedDocuments.find((function(e){return e.id===t.id}))},inSelectedDocuments:function(t){return this.selectedDocuments.map((function(t){return t.id})).indexOf(t.id)>-1},showValue:function(t){var e;return(null===(e=this.findSelectedDocument(t))||void 0===e?void 0:e.value)||"TBC"},updateDate:function(t,e){this.$emit("update-document",{contract_document_id:e.id,value:t.target.value})},setValue:function(t){var e;return null===(e=this.selectedDocuments.find((function(e){return e.id===t.id})))||void 0===e?void 0:e.value.value},addDocument:function(){this.$emit("add-document",{contract_document_id:this.formData.document_id}),this.showModal=!1,this.formData.date_id=null},uploadFile:function(t){var e=this;this.uploadFileOptions.params={document_id:t.id},this.$nextTick((function(){e.showFileUploadModal=!0}))},removeFile:function(t){var e=this;confirm("Are you sure to remove the document?")&&r["a"].delete(o["a"].remove_contract_document(this.contractId,t.id)).then((function(){return e.$toasted.success("Document removed")})).then((function(){return e.$emit("file-deleted")})).catch((function(t){var n=t.response;return e.$toasted.error(n.message)}))},fileUploadSuccess:function(){this.$toasted.success("File uploaded"),this.showFileUploadModal=!1,this.$emit("file-uploaded")}}},w=g,y=Object(v["a"])(w,d,u,!1,null,"e52b490a",null),q=y.exports,D=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"DateList"},[n("h4",[t._v("Dates "),t.canUpdateContract?n("button",{staticClass:"btn btn-success btn-sm btn-icon",on:{click:function(e){t.showModal=!0}}},[n("i",{staticClass:"fa fa-plus"})]):t._e()]),n("table",{staticClass:"table"},[n("thead",[n("tr",[n("th",[t._v("Name")]),n("th",[t._v("Date")]),t.canUpdateContract?n("th",[t._v("Actions")]):t._e()])]),n("tbody",t._l(t.displayed_dates,(function(e){return n("DateTableRow",{attrs:{date:e,"can-update-contract":t.canUpdateContract},on:{"update-date":t.updateDate}})})),1)]),n("CModal",{attrs:{title:"Add Date",size:"lg",show:t.showModal},on:{"update:show":function(e){t.showModal=e}},scopedSlots:t._u([{key:"footer",fn:function(){return[n("button",{staticClass:"btn btn-success",on:{click:t.addContractDate}},[t._v("Add")])]},proxy:!0}])},[n("v-select",{attrs:{reduce:function(t){return t.id},options:t.can_be_added_dates,label:"label"},model:{value:t.formData.date_id,callback:function(e){t.$set(t.formData,"date_id",e)},expression:"formData.date_id"}})],1)],1)},x=[],k=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("tr",[n("td",[t._v(t._s(t.date.label))]),n("td",[n("CInput",{attrs:{type:"date",disabled:!1===t.canUpdateContract,value:t.selectedValue},on:{change:t.updateDateValue},scopedSlots:t._u([{key:"append",fn:function(){return[t.showButton?n("CButton",{attrs:{type:"button",color:"success"},on:{click:t.updateDate}},[n("i",{staticClass:"fa fa-check"})]):t._e()]},proxy:!0}])})],1),t.canUpdateContract?n("td",[t._m(0)]):t._e()])},$=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"btn btn-sm btn-icon btn-danger"},[n("i",{staticClass:"fas fa-trash-alt"})])}],S={name:"DateTableRow",props:{date:{type:Object,required:!0},canUpdateContract:{type:Boolean,required:!0}},data:function(){return{dateValue:null}},computed:{selectedValue:function(){var t;return null===(t=this.date.value)||void 0===t?void 0:t.value},isDirty:function(){var t;return null!==this.dateValue&&(null===(t=this.date.value)||void 0===t?void 0:t.value)!==this.dateValue},buttonColor:function(){return this.isDirty?"warning":"success"},showButton:function(){return null===this.date.value||this.isDirty}},methods:{updateDateValue:function(t){this.dateValue=t},updateDate:function(){this.$emit("update-date",{contract_date_id:this.date.id,value:this.dateValue}),this.dateValue=null}}},A=S,N=(n("31d2"),Object(v["a"])(A,k,$,!1,null,null,null)),R=N.exports,U={name:"DateList",components:{vSelect:c.a,DateTableRow:R},props:{dates:{type:Array,required:!0},selectedDates:{type:Array,required:!0},canUpdateContract:{type:Boolean,required:!0}},data:function(){return{showModal:!1,formData:{date_id:null}}},computed:{displayed_dates:function(){var t=this;return this.dates.map((function(e){var n;return null!==(n=t.findSelectedDate(e))&&void 0!==n?n:e.assignment.is_required?e:null})).filter((function(t){return null!==t}))},can_be_added_dates:function(){var t=this;return this.dates.filter((function(e){return!t.inSelectedDate(e)&&!1===e.assignment.is_required}))}},methods:{findSelectedDate:function(t){return this.selectedDates.find((function(e){return e.id===t.id}))},inSelectedDate:function(t){return this.selectedDates.map((function(t){return t.id})).indexOf(t.id)>-1},showValue:function(t){var e;return(null===(e=this.findSelectedDate(t))||void 0===e?void 0:e.value)||"TBC"},updateDate:function(t){this.$emit("update-date",t)},setValue:function(t){var e;return null===(e=this.selectedDates.find((function(e){return e.id===t.id})))||void 0===e?void 0:e.value.value},addContractDate:function(){this.$emit("add-date",{contract_date_id:this.formData.date_id}),this.showModal=!1,this.formData.date_id=null}}},M=U,P=Object(v["a"])(M,D,x,!1,null,"39e838ca",null),O=P.exports,I=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ClientBasicInfo"},[n("div",[t._v(" Client Name: "),n("strong",[t._v(t._s(t.client.prefix)+" "+t._s(t.client.full_name))])]),n("div",[t._v(" Mobile: "),n("strong",[t._v(t._s(t.client.mobile))])]),n("div",[n("router-link",{staticClass:"btn btn-info bnt-sm",attrs:{to:{name:"Client",params:{id:t.client.id}}}},[t._v("Detail ")])],1)])},F=[],B={name:"ClientBasicInfo",props:{client:{type:Object,required:!0}}},j=B,E=Object(v["a"])(j,I,F,!1,null,"a61dfdd2",null),z=E.exports,L=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ApplicantBasicInfo"},[n("div",[t._v(" Applicant Name: "),n("strong",[t._v(t._s(t.applicant.name))])]),n("div",[t._v(" Gender: "),n("strong",[t._v(t._s(t.applicant.gender))])]),n("div",[t._v(" Age: "),n("strong",[t._v(t._s(t.applicant.age))])]),n("div",[t._v(" Nationality: "),n("strong",[t._v(t._s(t.applicant.nationality))])]),n("div",[n("router-link",{staticClass:"btn btn-info bnt-sm",attrs:{to:{name:"Applicant",params:{id:t.applicant.id}}}},[t._v("Detail ")])],1)])},V=[],T={name:"ApplicantBasicInfo",props:{applicant:{type:Object,required:!0}}},H=T,J=Object(v["a"])(H,L,V,!1,null,"713f3319",null),K=J.exports,G=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"SelectContractAddress"},[n("h4",[t._v("Address "),t.canUpdateContract?n("button",{staticClass:"btn btn-sm btn-success",on:{click:function(e){t.showModal=!0}}},[n("i",{staticClass:"fa fa-plus"})]):t._e()]),n("v-select",{attrs:{disabled:!t.canUpdateContract,options:t.availableAddresses,labe:"label"},on:{input:function(e){return t.$emit("address-changed")}},model:{value:t.contract.address,callback:function(e){t.$set(t.contract,"address",e)},expression:"contract.address"}}),n("CModal",{attrs:{title:"Add Address",color:"success",size:"xl",show:t.showModal},on:{"update:show":function(e){t.showModal=e}},scopedSlots:t._u([{key:"footer",fn:function(){return[n("button",{staticClass:"btn btn-sm btn-secondary",on:{click:function(e){t.showModal=!1}}},[t._v("Close ")]),n("button",{staticClass:"btn btn-sm btn-success",on:{click:t.createNewAddress}},[t._v("Create")])]},proxy:!0}])},[n("div",{staticClass:"form-group"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-12"},[n("div",{staticClass:"form-group"},[n("label",[t._v("Address 1")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.new_address.address_1,expression:"new_address.address_1"}],staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:t.new_address.address_1},on:{input:function(e){e.target.composing||t.$set(t.new_address,"address_1",e.target.value)}}})]),n("div",{staticClass:"form-group"},[n("label",[t._v("Address 2")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.new_address.address_2,expression:"new_address.address_2"}],staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:t.new_address.address_2},on:{input:function(e){e.target.composing||t.$set(t.new_address,"address_2",e.target.value)}}})]),n("div",{staticClass:"form-group"},[n("label",[t._v("Address 3")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.new_address.address_3,expression:"new_address.address_3"}],staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:t.new_address.address_3},on:{input:function(e){e.target.composing||t.$set(t.new_address,"address_3",e.target.value)}}})]),n("div",{staticClass:"form-group"},[n("label",[t._v("Country")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.new_address.country,expression:"new_address.country"}],staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:t.new_address.country},on:{input:function(e){e.target.composing||t.$set(t.new_address,"country",e.target.value)}}})])])])])])],1)},Q=[],W={name:"SelectContractAddress",props:{contract:{type:Object,required:!0},canUpdateContract:{type:Boolean,require:!0}},components:{vSelect:c.a},data:function(){return{showModal:!1,new_address:{address_1:null,address_2:null,address_3:null,country:"Hong Kong"}}},computed:{availableAddresses:function(){return this.contract.client.account.addresses.map((function(t){return t["label"]="".concat(t.address_1,", ").concat(t.address_2?t.address_2+",":""," ").concat(t.address_3?t.address_3+",":""," ").concat(t.country,","),t}))}},methods:{createNewAddress:function(){var t=this;r["a"].post(o["a"].add_address(this.contract.id),this.new_address).then((function(e){var n=e.data;return t.contract.client.account.addresses.push(n)})).then((function(){return t.showModal=!1})).then((function(){return t.new_address={address_1:null,address_2:null,address_3:null,country:"Hong Kong"}})).then((function(){return t.$toasted.success("Address added")}))}}},X=W,Y=Object(v["a"])(X,G,Q,!1,null,"0c66928a",null),Z=Y.exports,tt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("fieldset",{staticClass:"SelectContractResidents"},[n("legend",[t._v("Other Residents "),t.canUpdateContract?n("button",{staticClass:"btn btn-sm btn-success",on:{click:function(e){t.showModal=!0}}},[n("i",{staticClass:"fa fa-plus"})]):t._e()]),n("CDataTable",{attrs:{items:t.residents,fields:t.fields,"column-filter":"","table-filter":"","items-per-page-select":"","items-per-page":15,hover:"",sorter:"",pagination:""},scopedSlots:t._u([{key:"full_name",fn:function(e){var a=e.item;return[n("td",[n("router-link",{attrs:{to:{name:"Edit Client",params:{id:a.id}}}},[t._v(t._s(a.full_name))])],1)]}},{key:"actions",fn:function(e){var a=e.item;return[n("td",[t.canUpdateContract?n("DeleteButton",{attrs:{click:function(){return t.removeResident(a)}}}):t._e()],1)]}}])}),n("CModal",{attrs:{title:"Select resident",color:"success",size:"xl",show:t.showModal},on:{"update:show":function(e){t.showModal=e}},scopedSlots:t._u([{key:"footer",fn:function(){return[n("button",{staticClass:"btn btn-sm btn-secondary",on:{click:function(e){t.showModal=!1}}},[t._v("Close ")]),n("button",{staticClass:"btn btn-sm btn-success",on:{click:t.addResidents}},[t._v("Create")])]},proxy:!0}])},[n("div",{staticClass:"form-group"},[n("label",[t._v("Select Other Resident "),n("button",{staticClass:"btn btn-icon btn-rounded btn-success btn-sm",on:{click:function(e){t.showAddResidentsModal=!0}}},[n("i",{staticClass:"fa fa-plus"})])]),n("v-select",{attrs:{options:t.availableResidents,label:"full_name"},model:{value:t.resident,callback:function(e){t.resident=e},expression:"resident"}})],1),n("div",{staticClass:"form-group"},[n("label",[t._v("Relation")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.resident.relation,expression:"resident.relation"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.resident.relation},on:{input:function(e){e.target.composing||t.$set(t.resident,"relation",e.target.value)}}})])]),n("CModal",{attrs:{title:"Add New resident",color:"success",size:"xl",show:t.showAddResidentsModal},on:{"update:show":function(e){t.showAddResidentsModal=e}},scopedSlots:t._u([{key:"footer",fn:function(){return[n("button",{staticClass:"btn btn-sm btn-secondary",on:{click:function(e){t.showAddResidentsModal=!1}}},[t._v("Close ")]),n("button",{staticClass:"btn btn-sm btn-success",on:{click:t.createNewResident}},[t._v("Create")])]},proxy:!0}])},[n("CreateResident",{attrs:{new_resident:t.new_resident},on:{"update:new_resident":function(e){t.new_resident=e}}})],1)],1)},et=[],nt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"btn btn-danger btn-sm",on:{click:t.trigger}},[n("i",{staticClass:"fas fa-trash-alt"})])},at=[],st={name:"DeleteButton",props:{click:{type:Function}},methods:{trigger:function(){this.click&&this.click()}}},ot=st,rt=Object(v["a"])(ot,nt,at,!1,null,"b3127a9e",null),it=rt.exports,ct=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"form-group"},[n("label",[t._v("Add Resident")]),n("div",{staticClass:"row"},[n("div",{staticClass:"col-6"},[n("div",{staticClass:"form-group"},[n("label",[t._v("First Name")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.new_resident.first_name,expression:"new_resident.first_name"}],staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:t.new_resident.first_name},on:{input:function(e){e.target.composing||t.$set(t.new_resident,"first_name",e.target.value)}}})])]),n("div",{staticClass:"col-6"},[n("div",{staticClass:"form-group"},[n("label",[t._v("Last Name")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.new_resident.last_name,expression:"new_resident.last_name"}],staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:t.new_resident.last_name},on:{input:function(e){e.target.composing||t.$set(t.new_resident,"last_name",e.target.value)}}})])]),n("div",{staticClass:"col-6"},[n("div",{staticClass:"form-group"},[n("label",[t._v("Mobile")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.new_resident.mobile,expression:"new_resident.mobile"}],staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:t.new_resident.mobile},on:{input:function(e){e.target.composing||t.$set(t.new_resident,"mobile",e.target.value)}}})])]),n("div",{staticClass:"col-6"},[n("div",{staticClass:"form-group"},[n("label",[t._v("HK ID")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.new_resident.hk_id,expression:"new_resident.hk_id"}],staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:t.new_resident.hk_id},on:{input:function(e){e.target.composing||t.$set(t.new_resident,"hk_id",e.target.value)}}})])]),n("div",{staticClass:"col-6"},[n("div",{staticClass:"form-group"},[n("label",[t._v("Date of Birth")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.new_resident.date_of_birth,expression:"new_resident.date_of_birth"}],staticClass:"form-control",attrs:{type:"date",required:""},domProps:{value:t.new_resident.date_of_birth},on:{input:function(e){e.target.composing||t.$set(t.new_resident,"date_of_birth",e.target.value)}}})])]),n("div",{staticClass:"col-6"},[n("div",{staticClass:"form-group"},[n("label",[t._v("Relation")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.new_resident.relation,expression:"new_resident.relation"}],staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:t.new_resident.relation},on:{input:function(e){e.target.composing||t.$set(t.new_resident,"relation",e.target.value)}}})])]),n("div",{staticClass:"col-6"},[n("div",{staticClass:"form-group"},[n("label",[t._v("Gender")]),n("select",{directives:[{name:"model",rawName:"v-model",value:t.new_resident.is_male,expression:"new_resident.is_male"}],staticClass:"form-control",attrs:{type:"text",required:""},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.new_resident,"is_male",e.target.multiple?n:n[0])}}},[n("option",{domProps:{value:!0}},[t._v("Male")]),n("option",{domProps:{value:!1}},[t._v("female")])])])])])])},dt=[],ut={name:"CreateResident",props:{new_resident:{type:Object,required:!0}}},lt=ut,mt=Object(v["a"])(lt,ct,dt,!1,null,"0d2faaee",null),_t=mt.exports,pt={name:"SelectContractResidents",props:{contract:{type:Object,required:!0},canUpdateContract:{type:Boolean,require:!0}},components:{vSelect:c.a,DeleteButton:it,CreateResident:_t},data:function(){return{showModal:!1,showAddResidentsModal:!1,resident:{},new_resident:{hk_id:null,mobile:null,is_male:null,relation:null,last_name:null,first_name:null,date_of_birth:null}}},computed:{residents:function(){var t=this.contract.residents.reduce((function(t,e){return t.push(e.id),t}),[]);return _.filter(this.contract.client.relatives,(function(e){return t.indexOf(e.id)>-1}))},availableResidents:function(){var t=this,e=this.contract.residents.map((function(t){return t.id}));return this.contract.client.relatives.filter((function(n){return n.id!==t.contract.client.id&&-1===e.indexOf(n.id)}))},fields:function(){var t=[{key:"full_name"},{key:"hk_id",label:"HK ID"},{key:"relation"},{key:"mobile"}];return this.canUpdateContract&&t.push({key:"actions",sorter:!1,filter:!1}),t}},methods:{removeResident:function(t){var e=this;confirm("Are you sure to remove resident?")&&r["a"].delete(o["a"].remove_residents(this.contract.id,t.id)).then((function(){return e.contract.residents=e.contract.residents.filter((function(e){return e.id!==t.id}))})).then((function(){return e.$toasted.success("Resident deleted")}))},addResidents:function(){var t=this;r["a"].post(o["a"].add_residents(this.contract.id),this.resident).then((function(e){var n=e.data;return t.updateResidents(n)})).then((function(){return t.resident={}})).then((function(){return t.$toasted.success("Resident added")}))},createNewResident:function(){var t=this;r["a"].post(o["a"].add_new_resident(this.contract.id),this.new_resident).then((function(e){var n=e.data;t.contract.client.relatives.push(n),t.updateResidents(n)})).then((function(){return t.$toasted.success("Resident added")})).then((function(){return t.showAddResidentsModal=!1})).then((function(){return t.showModal=!1})).then((function(){return t.resetNewResident()}))},resetNewResident:function(){this.new_resident={hk_id:null,mobile:null,is_male:null,relation:null,last_name:null,first_name:null,date_of_birth:null}},updateResidents:function(t){var e=this;Array.isArray(t)?t.forEach((function(t){return e.contract.residents.push(t)})):this.contract.residents.push(t)}}},ft=pt,vt=Object(v["a"])(ft,tt,et,!1,null,"9148380a",null),bt=vt.exports,ht=n("fd22"),Ct=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("button",{staticClass:"mb-3 float-right btn btn-success btn-sm",on:{click:function(e){t.show_add_document=!0}}},[n("i",{staticClass:"fa fa-plus"}),t._v(" Add ")]),n("table",{staticClass:"table striped"},[t._m(0),n("tbody",t._l(t.documents,(function(e){return n("tr",{key:e.id},[n("td",[t._v(t._s(e.label))]),n("td",[n("a",{staticClass:"btn btn-primary btn-sm",attrs:{href:"/"+e.link,target:"_blank"}},[t._v("File")])])])})),0)]),n("CModal",{attrs:{show:t.show_add_document,title:"Add New Document"},on:{"update:show":function(e){t.show_add_document=e}},scopedSlots:t._u([{key:"footer",fn:function(){return[n("span")]},proxy:!0}])},[n("form",{attrs:{id:"newUploadDocumentForm",enctype:"multipart/form-data"},on:{submit:function(e){return e.preventDefault(),t.submit.apply(null,arguments)}}},[n("div",{staticClass:"form-group"},[n("label",[t._v("Label")]),n("input",{staticClass:"form-control",attrs:{type:"text",name:"label"}})]),n("div",{staticClass:"form-group"},[n("label",[t._v("File")]),n("input",{staticClass:"form-control",attrs:{type:"file",name:"file"}})]),n("div",{staticClass:"form-group"},[n("button",{staticClass:"btn btn-success",attrs:{type:"submit"}},[t._v("Submit ")])])])])],1)},gt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("th",[t._v("Label")]),n("th",[t._v("Link")])])}],wt={name:"ContractUploadedDocuments",props:{contractId:{type:Number,required:!0}},data:function(){return{documents:[],show_add_document:!1}},created:function(){this.fetchUploadedDocuments()},methods:{fetchUploadedDocuments:function(){var t=this;r["a"].get(o["a"].uploaded_documents(this.contractId)).then((function(e){var n=e.data;return t.documents=n})).then((function(e){return t.$toasted.error(e.message)}))},submit:function(t){var e=this,n=new FormData(t.target);r["a"].post(o["a"].store_uploaded_documents(this.contractId),n).then((function(t){t.data;return e.fetchUploadedDocuments()})).then((function(){return e.$toasted.success("Document uploaded!")})).then((function(){return t.target.reset()})).then((function(){return e.show_add_document=!1})).catch((function(t){return e.$toasted.error("Cannot upload document")}))}}},yt=wt,qt=Object(v["a"])(yt,Ct,gt,!1,null,"4e03a0b5",null),Dt=qt.exports,xt={name:"ContractShow",data:function(){return{contract:null,showAddResidentsModal:!1,showAddAddressModal:!1,contract_dates:[],addresses:[],show_requirement_section:!1,show_contract_detail:!1,show_contract_address_and_residents:!1,show_upload_documents:!1}},computed:{updateRequirementUrl:function(){return o["a"].update_requirement(this.contract.id)},documents:function(){return[]},canUpdateContract:function(){return"Pending"===this.contract.status||"Submitted"===this.contract.status},hiddenJobRequirmentInputs:function(){return["number_of_adults","number_of_elders","number_of_kids","number_of_young_adults","number_of_expecting_babies"]}},components:{vSelect:c.a,DateList:O,DocumentList:q,RequirementInfo:ht["a"],ClientBasicInfo:z,ApplicantBasicInfo:K,SelectContractAddress:Z,SelectContractResidents:bt,ContractUploadedDocuments:Dt},created:function(){this.fetchContract()},methods:{isState:function(t){var e;return(null===(e=this.contract.current_state)||void 0===e?void 0:e.state.code)===t},fetchContract:function(){var t=this;return r["a"].get(o["a"].show(this.$route.params.id)).then((function(e){var n=e.data;return t.contract=n})).catch((function(e){return t.$toasted.error("cannot fetch contract "+e.message)}))},updateContract:function(){var t=this;r["a"].put(o["a"].update(this.contract.id),{applicant_id:this.contract.applicant.id,client_id:this.contract.client.id,address_id:this.contract.address.id,status:this.contract.status,number_of_bedrooms:this.contract.number_of_bedrooms,dayoff_arrangement:this.contract.dayoff_arrangement,accommodation_type:this.contract.accommodation_type,accomodation_value:this.contract.accomodation_value,contract_number:this.contract.contract_number}).then((function(){return t.$toasted.success("Contract updated")}))},applyTransition:function(t){var e=this;confirm("Are you sure to make the transition?")&&r["a"].post(o["a"].transition(this.contract.id,t.id)).then((function(t){var n=t.data;return e.contract=n})).then((function(){return e.$toasted.success("Contract updated")})).catch((function(t){return e.$toasted.error(t.response.data.message)}))},updateDate:function(t){var e=this;return r["a"].put(o["a"].update_contract_date(this.contract.id),t).then((function(){return e.fetchContract()})).then((function(){return e.$toasted.success("Date updated!")})).catch((function(t){return e.$toasted.error(t.message)}))},addDate:function(t){var e=this;return r["a"].post(o["a"].add_contract_date(this.contract.id),t).then((function(){return e.fetchContract()})).then((function(){return e.$toasted.success("New date added!")})).catch((function(t){return e.$toasted.error(t.message)}))},addDocument:function(t){var e=this;return r["a"].post(o["a"].add_contract_document(this.contract.id),t).then((function(){return e.fetchContract()})).then((function(){return e.$toasted.success("New date added!")})).catch((function(t){return e.$toasted.error(t.message)}))},refreshDocumentList:function(){}}},kt=xt,$t=Object(v["a"])(kt,a,s,!1,null,"14088e98",null);e["default"]=$t.exports},"31d2":function(t,e,n){"use strict";n("aed7")},"4d66":function(t,e,n){"use strict";var a={list:"/api/agencycontract/contracts",store:"/api/agencycontract/contracts",transition:function(t,e){return"/api/agencycontract/contracts/".concat(t,"/transitions/").concat(e)},supersede:function(t){return"/api/agencycontract/contracts/".concat(t,"/supersede")},show:function(t){return"/api/agencycontract/contracts/".concat(t)},update:function(t){return"/api/agencycontract/contracts/".concat(t)},client:function(t){return"/api/agencycore/client/".concat(t,"/contracts/")},create_new_resident:function(t){return"/api/agencycore/clients/".concat(t,"/relatives")},add_residents:function(t){return"/api/agencycontract/contracts/".concat(t,"/add_residents")},add_new_resident:function(t){return"/api/agencycontract/contracts/".concat(t,"/add_new_residents")},remove_residents:function(t,e){return"/api/agencycontract/contracts/".concat(t,"/remove_residents/").concat(e)},add_address:function(t){return"/api/agencycontract/contracts/".concat(t,"/add_address")},contract_dates:function(t){return"/api/agencycontractdates/contract_types/".concat(t)},add_contract_date:function(t){return"/api/agencycontract/contracts/".concat(t,"/dates/")},update_contract_date:function(t){return"/api/agencycontract/contracts/".concat(t,"/dates/")},add_contract_document:function(t){return"/api/agencycontract/contracts/".concat(t,"/documents/")},update_contract_document:function(t){return"/api/agencycontract/contracts/".concat(t,"/documents/upload")},remove_contract_document:function(t,e){return"/api/agencycontract/contracts/".concat(t,"/documents/").concat(e)},update_requirement:function(t){return"/api/agencycontract/contracts/".concat(t,"/requirement")},expiring_contract:"/api/agencycontract/widgets/expiring_contract",uploaded_documents:function(t){return"/api/agencycontract/contracts/".concat(t,"/uploaded_documents")},store_uploaded_documents:function(t){return"/api/agencycontract/contracts/".concat(t,"/uploaded_documents")},show_uploaded_documents:function(t,e){return"/api/agencycontract/contracts/".concat(t,"/uploaded_documents/").concat(e)},update_uploaded_documents:function(t,e){return"/api/agencycontract/contracts/".concat(t,"/uploaded_documents/").concat(e)},delete_uploaded_documents:function(t,e){return"/api/agencycontract/contracts/".concat(t,"/uploaded_documents/").concat(e)}};e["a"]=a},6994:function(t,e,n){"use strict";n("d0d4")},aed7:function(t,e,n){},d0d4:function(t,e,n){},fd22:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"RequirementInfo",class:{"is-dirty":t.isDirty}},[n("h4",[t._v("Job Requirements")]),n("div",{staticClass:"form-group"},[n("label",[t._v(" Expected Arrival Date")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.requirement.expected_arrival_date,expression:"requirement.expected_arrival_date"}],staticClass:"form-control",attrs:{type:"date",disabled:t.isDisabled("expected_arrival_date")},domProps:{value:t.requirement.expected_arrival_date},on:{input:function(e){e.target.composing||t.$set(t.requirement,"expected_arrival_date",e.target.value)}}})]),t.isShown("house_size")?n("div",{staticClass:"form-group"},[n("label",[t._v(" Residential Area")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.requirement.house_size,expression:"requirement.house_size"}],staticClass:"form-control",attrs:{type:"number",disabled:t.isDisabled("house_size")},domProps:{value:t.requirement.house_size},on:{input:function(e){e.target.composing||t.$set(t.requirement,"house_size",e.target.value)}}})]):t._e(),t.isShown("number_of_rooms")?n("div",{staticClass:"form-group"},[n("label",[t._v(" Number of rooms")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.requirement.number_of_rooms,expression:"requirement.number_of_rooms"}],staticClass:"form-control",attrs:{type:"number",disabled:t.isDisabled("number_of_rooms")},domProps:{value:t.requirement.number_of_rooms},on:{input:function(e){e.target.composing||t.$set(t.requirement,"number_of_rooms",e.target.value)}}})]):t._e(),t.isShown("number_of_adults")?n("div",{staticClass:"form-group"},[n("label",[t._v(" Number of adults")]),n("div",{staticClass:"row"},[n("div",{staticClass:"col-4 "},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.requirement.number_of_adults,expression:"requirement.number_of_adults"}],staticClass:"form-control",attrs:{type:"number",disabled:t.isDisabled("number_of_adults")},domProps:{value:t.requirement.number_of_adults},on:{input:function(e){e.target.composing||t.$set(t.requirement,"number_of_adults",e.target.value)}}})]),n("div",{staticClass:"col-8"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.requirement.age_of_adults,expression:"requirement.age_of_adults"}],staticClass:"form-control",attrs:{type:"text",disabled:t.isDisabled("number_of_adults")},domProps:{value:t.requirement.age_of_adults},on:{input:function(e){e.target.composing||t.$set(t.requirement,"age_of_adults",e.target.value)}}})])])]):t._e(),t.isShown("number_of_elders")?n("div",{staticClass:"form-group"},[n("label",[t._v(" Number of elders")]),n("div",{staticClass:"row"},[n("div",{staticClass:"col-4 "},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.requirement.number_of_elders,expression:"requirement.number_of_elders"}],staticClass:"form-control",attrs:{type:"number",disabled:t.isDisabled("number_of_elders")},domProps:{value:t.requirement.number_of_elders},on:{input:function(e){e.target.composing||t.$set(t.requirement,"number_of_elders",e.target.value)}}})]),n("div",{staticClass:"col-8"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.requirement.age_of_elders,expression:"requirement.age_of_elders"}],staticClass:"form-control",attrs:{type:"text",disabled:t.isDisabled("age_of_elders")},domProps:{value:t.requirement.age_of_elders},on:{input:function(e){e.target.composing||t.$set(t.requirement,"age_of_elders",e.target.value)}}})])])]):t._e(),t.isShown("number_of_kids")?n("div",{staticClass:"form-group"},[n("label",[t._v(" Number of children (0-5)")]),n("div",{staticClass:"row"},[n("div",{staticClass:"col-4 "},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.requirement.number_of_kids,expression:"requirement.number_of_kids"}],staticClass:"form-control",attrs:{type:"number",placeholder:"Number of Children",disabled:t.isDisabled("number_of_kids")},domProps:{value:t.requirement.number_of_kids},on:{input:function(e){e.target.composing||t.$set(t.requirement,"number_of_kids",e.target.value)}}})]),n("div",{staticClass:"col-8"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.requirement.age_of_kids,expression:"requirement.age_of_kids"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Age of Children",disabled:t.isDisabled("age_of_kids")},domProps:{value:t.requirement.age_of_kids},on:{input:function(e){e.target.composing||t.$set(t.requirement,"age_of_kids",e.target.value)}}})])])]):t._e(),t.isShown("number_of_young_adults")?n("div",{staticClass:"form-group"},[n("label",[t._v(" Number of children (6-18)")]),n("div",{staticClass:"row"},[n("div",{staticClass:"col-4 "},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.requirement.number_of_young_adults,expression:"requirement.number_of_young_adults"}],staticClass:"form-control",attrs:{type:"number",placeholder:"Number of Children",disabled:t.isDisabled("number_of_young_adults")},domProps:{value:t.requirement.number_of_young_adults},on:{input:function(e){e.target.composing||t.$set(t.requirement,"number_of_young_adults",e.target.value)}}})]),n("div",{staticClass:"col-8"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.requirement.age_of_young_adults,expression:"requirement.age_of_young_adults"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Age of Children",disabled:t.isDisabled("age_of_young_adults")},domProps:{value:t.requirement.age_of_young_adults},on:{input:function(e){e.target.composing||t.$set(t.requirement,"age_of_young_adults",e.target.value)}}})])])]):t._e(),t.isShown("number_of_expecting_babies")?n("div",{staticClass:"form-group"},[n("label",[t._v(" Number of expecting babies")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.requirement.number_of_expecting_babies,expression:"requirement.number_of_expecting_babies"}],staticClass:"form-control",attrs:{type:"number",disabled:t.isDisabled("number_of_expecting_babies")},domProps:{value:t.requirement.number_of_expecting_babies},on:{input:function(e){e.target.composing||t.$set(t.requirement,"number_of_expecting_babies",e.target.value)}}})]):t._e(),t.isShown("disabled_personnel")?n("div",{staticClass:"form-group"},[n("label",[t._v(" Number of constant care")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.requirement.disabled_personnel,expression:"requirement.disabled_personnel"}],staticClass:"form-control",attrs:{type:"number",disabled:t.isDisabled("disabled_personnel")},domProps:{value:t.requirement.disabled_personnel},on:{input:function(e){e.target.composing||t.$set(t.requirement,"disabled_personnel",e.target.value)}}})]):t._e(),t.isShown("accommodation_type")?n("div",{staticClass:"form-group"},[n("label",[t._v(" Accommodation ")]),n("div",{staticClass:"row"},[n("div",{staticClass:"col-4 "},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.requirement.accommodation_type,expression:"requirement.accommodation_type"}],staticClass:"form-control",attrs:{type:"number",disabled:t.isDisabled("accommodation_type")},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.requirement,"accommodation_type",e.target.multiple?n:n[0])}}},[n("option",{attrs:{value:"alone"}},[t._v("Own Room")]),n("option",{attrs:{value:"shared"}},[t._v("Shared Room")])])]),n("div",{staticClass:"col-8"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.requirement.accommodation_value,expression:"requirement.accommodation_value"}],staticClass:"form-control",attrs:{type:"text",disabled:t.isDisabled("accommodation_value")},domProps:{value:t.requirement.accommodation_value},on:{input:function(e){e.target.composing||t.$set(t.requirement,"accommodation_value",e.target.value)}}})])])]):t._e(),t.isShown("special_duties")?n("div",{staticClass:"form-group"},[n("label",[t._v(" Special Duties")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.requirement.special_duties,expression:"requirement.special_duties"}],staticClass:"form-control",attrs:{type:"text",disabled:t.isDisabled("special_duties")},domProps:{value:t.requirement.special_duties},on:{input:function(e){e.target.composing||t.$set(t.requirement,"special_duties",e.target.value)}}})]):t._e(),t.isShown("note")?n("div",{staticClass:"form-group"},[n("label",[t._v(" Note")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.requirement.note,expression:"requirement.note"}],staticClass:"form-control",attrs:{disabled:t.isDisabled("note")},domProps:{value:t.requirement.note},on:{input:function(e){e.target.composing||t.$set(t.requirement,"note",e.target.value)}}})]):t._e(),n("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:t.update}},[t._v("Update Requirements")])])},s=[],o=n("7ed9"),r=n("2ef0"),i=n.n(r),c={name:"RequirementInfo",props:{url:{type:String,required:!0},requirement:{type:Object,required:!0},hiddenInputs:{type:Array,default:function(){return[]}},disabledInputs:{type:Array,default:function(){return[]}}},data:function(){return{original:null}},created:function(){this.original=i.a.cloneDeep(this.requirement)},computed:{isDirty:function(){return!i.a.isEqual(this.original,this.requirement)}},methods:{isHidden:function(t){return this.hiddenInputs.indexOf(t)>-1},isShown:function(t){return!this.isHidden(t)},isDisabled:function(t){return this.disabledInputs.indexOf(t)>-1},update:function(){var t=this;o["a"].post(this.url,this.requirement).then((function(e){var n=e.data;return t.$emit("update-requirement",n)})).then((function(){return t.original=i.a.cloneDeep(t.requirement)})).then((function(){return t.$toasted.success("Requirement Updated")})).catch((function(e){return t.$toasted.error(e.response.message)}))}}},d=c,u=(n("6994"),n("2877")),l=Object(u["a"])(d,a,s,!1,null,"f81ac87c",null);e["a"]=l.exports}}]);