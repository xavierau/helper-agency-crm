(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e396a0e0"],{"21e0":function(e,t,n){},"8db4":function(e,t,n){"use strict";var a=n("7ed9"),r=n("2ef0");function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t=u(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e){var t=c(e,"string");return"symbol"===i(t)?t:String(t)}function c(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==i(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var p={data:function(){return{fields:[],columnFilters:{},sorter:null,pageSize:15,paginator:null,search:null,external_url:null}},computed:{items:function(){return this.paginator?this.paginator.data:null},paginationObject:function(){var e,t,n,a,r,i;return{pages:(null===(e=this.paginator)||void 0===e||null===(t=e.meta)||void 0===t?void 0:t.last_page)||(null===(n=this.paginator)||void 0===n?void 0:n.last_page)||0,activePage:(null===(a=this.paginator)||void 0===a||null===(r=a.meta)||void 0===r?void 0:r.current_page)||(null===(i=this.paginator)||void 0===i?void 0:i.current_page)||0}}},created:function(){this.fetchItems()},methods:{fetchItems:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.columnFilters=this.$route.query;var n=Object.keys(this.columnFilters).reduce((function(t,n){var a;e.columnFilters[n]&&Object(r["isArray"])(e.columnFilters[n])?t["filter[".concat(n,"]")]=[null===(a=e.columnFilters[n])||void 0===a?void 0:a.join(",")]:t["filter[".concat(n,"]")]=e.columnFilters[n];return t}),{}),i={params:s(s({"filter[search]":this.search,pageSize:this.pageSize,sort:this.sorter},n),t)};a["a"].get(this.external_url,i).then((function(t){var n=t.data;return e.paginator=n})).catch((function(e){return console.log(e)})).finally((function(){return e.isLoading=!1}))},updateTableFilter:function(e){this.search=e,this.fetchItems()},updateColumnFilter:function(e){"change"!==e.type&&(this.columnFilters=Object.assign(this.columnFilters,e)),this.fetchItems()},updateSorter:function(e){this.sorter=e.asc?e.column:"-".concat(e.column),this.fetchItems()},updatePerPageItems:function(e){this.pageSize=e,this.fetchItems()},updateActivePage:function(e){this.fetchItems({page:e})}}};t["a"]=p},"948e":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ApplicantIndex"},[n("CCard",[n("CCardHeader",{staticClass:"d-flex justify-content-between align-content-center"},[n("h5",{staticClass:"m-0"},[e._v("All applicants")]),n("div",[n("router-link",{staticClass:"btn btn-sm btn-primary mx-2",attrs:{to:{name:e.RouteName.ImportApplicant}}},[n("i",{staticClass:"fa fa-plus"}),e._v(" Import ")]),n("router-link",{staticClass:"btn btn-sm btn-primary mx-2",attrs:{to:{name:e.RouteName.ImportExperience}}},[n("i",{staticClass:"fa fa-plus"}),e._v(" Import Experience ")]),n("button",{staticClass:"btn btn-sm btn-success mx-2",on:{click:function(t){e.showCreateModal=!e.showCreateModal}}},[n("i",{staticClass:"fa fa-plus"}),e._v(" Applicant ")])],1)]),e.paginator?n("CCardBody",[n("section",{staticClass:"row"},[n("div",{staticClass:"col-12"},[n("h3",[e._v("Experience filters")])]),e._l(e.duties,(function(t){return n("div",{key:t.id,staticClass:"col-sm-4 col-md-3"},[n("label",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedDuties,expression:"selectedDuties"}],attrs:{type:"checkbox"},domProps:{value:t.id,checked:Array.isArray(e.selectedDuties)?e._i(e.selectedDuties,t.id)>-1:e.selectedDuties},on:{change:[function(n){var a=e.selectedDuties,r=n.target,i=!!r.checked;if(Array.isArray(a)){var o=t.id,s=e._i(a,o);r.checked?s<0&&(e.selectedDuties=a.concat([o])):s>-1&&(e.selectedDuties=a.slice(0,s).concat(a.slice(s+1)))}else e.selectedDuties=i},e.searchSelectedDuties]}}),e._v(" "+e._s(t.label)+" ")])])}))],2),n("CDataTable",{attrs:{items:e.items,fields:e.fields,loading:e.isLoading,hover:"","items-per-page":e.pageSize,"items-per-page-select":{external:!0},"column-filter":{external:!0,lazy:!0},"table-filter":{external:!0,lazy:!0},sorter:{external:!0,resetable:!0}},on:{"pagination-change":e.updatePerPageItems,"update:table-filter-value":e.updateTableFilter,"update:column-filter-value":e.updateColumnFilter,"update:sorter-value":e.updateSorter},scopedSlots:e._u([{key:"name",fn:function(t){var a=t.item;return[n("td",[n("img",{attrs:{width:"20%",src:a.thumbnail,alt:""}}),n("router-link",{attrs:{to:{name:"Applicant",params:{id:a.id}}}},[e._v(" "+e._s(a.name)+" ")])],1)]}},{key:"status-filter",fn:function(t){t.item;return[n("select",{directives:[{name:"model",rawName:"v-model",value:e.columnFilters["status"],expression:"columnFilters['status']"}],staticClass:"form-control",staticStyle:{height:"28.36px",padding:"0","font-size":"0.76562rem"},on:{change:[function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.columnFilters,"status",t.target.multiple?n:n[0])},e.updateColumnFilter]}},[n("option",{domProps:{value:null}}),e._l(e.status,(function(t,a){return n("option",{key:a,domProps:{value:t}},[e._v(" "+e._s(t)+" ")])}))],2)]}},{key:"is_approved-filter",fn:function(t){t.item;return[n("select",{directives:[{name:"model",rawName:"v-model",value:e.columnFilters["is_approved"],expression:"columnFilters['is_approved']"}],staticClass:"form-control",staticStyle:{height:"28.36px",padding:"0","font-size":"0.76562rem"},on:{change:[function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.columnFilters,"is_approved",t.target.multiple?n:n[0])},e.updateColumnFilter]}},[n("option",{domProps:{value:null}}),n("option",{attrs:{selected:""},domProps:{value:1}},[e._v("Approved")]),n("option",{domProps:{value:0,selected:0==e.$route.query["filter[is_approved]"]}},[e._v("Pending ")])])]}},{key:"gender-filter",fn:function(t){t.item;return[n("select",{directives:[{name:"model",rawName:"v-model",value:e.columnFilters["gender"],expression:"columnFilters['gender']"}],staticClass:"form-control",staticStyle:{height:"28.36px",padding:"0","font-size":"0.76562rem"},on:{change:[function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.columnFilters,"gender",t.target.multiple?n:n[0])},e.updateColumnFilter]}},[n("option",{domProps:{value:null}}),n("option",{attrs:{value:"male"}},[e._v("Male")]),n("option",{attrs:{value:"female"}},[e._v("Female")])])]}},{key:"current_country-filter",fn:function(t){t.item;return[n("select",{directives:[{name:"model",rawName:"v-model",value:e.columnFilters["current_location"],expression:"columnFilters['current_location']"}],staticClass:"form-control",staticStyle:{height:"28.36px",padding:"0","font-size":"0.76562rem"},on:{change:[function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.columnFilters,"current_location",t.target.multiple?n:n[0])},e.updateColumnFilter]}},[n("option",{attrs:{value:"local"}},[e._v("Local")]),n("option",{attrs:{value:"overseas"}},[e._v("overseas")])])]}},{key:"is_approved",fn:function(t){var a=t.item;return[n("td",[n("span",{staticClass:"badge",class:{"badge-success":a.is_approved,"badge-warning":!a.is_approved},domProps:{textContent:e._s(a.is_approved?"Approved":"Pending")}})])]}},{key:"status",fn:function(t){var a=t.item;return[n("td",[n("span",{staticClass:"badge",class:{"badge-success":"active"===a.status,"badge-warning":"active"!==a.status},domProps:{textContent:e._s("active"===a.status?"Active":"Inactive")}})])]}},{key:"gender",fn:function(t){var a=t.item;return[n("td",[e._v(" "+e._s(e._f("capitalize")(a.gender))+" ")])]}},{key:"actions",fn:function(t){var a=t.item;return[n("td",[n("div",{staticClass:"btn-group btn-group-sm mr-3"},[n("router-link",{staticClass:"btn btn-primary",attrs:{to:{name:"Applicant",params:{id:a.id}}}},[n("i",{staticClass:"far fa-eye"})])],1),n("router-link",{staticClass:"btn btn-sm btn-info",attrs:{to:{name:"Edit Applicant",params:{id:a.id}}}},[n("i",{staticClass:"fas fa-edit"})]),n("button",{staticClass:"btn btn-sm btn-danger",attrs:{type:"button"},on:{click:function(t){return e.deleteApplicant(a)}}},[n("i",{staticClass:"fas fa-trash-alt"})])],1)]}}],null,!1,4114036483)}),n("CPagination",{attrs:{activePage:e.paginationObject.activePage,pages:e.paginationObject.pages},on:{"update:activePage":e.updateActivePage}})],1):n("CCardBody",[n("h4",[e._v("Loading...")])])],1),n("CModal",{attrs:{show:e.showCreateModal,title:"Create New Applicant",color:"success",static:"",size:"xl"},on:{"update:show":function(t){e.showCreateModal=t}},scopedSlots:e._u([{key:"footer",fn:function(){return[n("button",{staticClass:"btn btn-success",on:{click:e.submit}},[e._v("Create")])]},proxy:!0}])},[n("create-new-applicant-form",{attrs:{"form-data":e.formData},on:{"update:formData":function(t){e.formData=t},"update:form-data":function(t){e.formData=t}}})],1)],1)},r=[],i=n("1bbb"),o=n("ff37"),s=n("7ed9"),l=n("2ef0"),u=n.n(l),c=n("d322"),p=(n("da93"),n("44f1")),d=n("8db4"),m=n("a16f"),f={age_of_daughters:"",age_of_sons:"",date_of_release:null,cantonese:"",current_country:null,date_of_birth:null,duties:[],email:null,english:"",experience:null,facebook:null,father_age:null,father_name:null,father_occupation:null,gender:"female",height:null,highest_education:null,mandarin:"",marital_status:"single",mother_age:null,mother_name:null,mother_occupation:null,name:null,nationality:null,number_in_family:1,number_of_brothers:0,number_of_daughters:0,number_of_sisters:0,number_of_sons:0,other_language:"",phone:null,spouse_age:null,spouse_name:null,spouse_occupation:null,weight:null,sunday:!1,weekday:!1,alternative:!1,no_holidays:!1,once_a_month:!1,questions:{change_name:!0,change_name_info:null,has_been_deport:!0,has_been_deport_info:null,reject_visa:!0,reject_visa_info:null,afraid_of_dog:!1,eat_pork:!0,smoke_and_drink:!1}},v={name:"ApplicantIndex",components:{CreateNewApplicantForm:o["a"]},mixins:[d["a"]],filters:{capitalize:p["a"]},data:function(){return{showCreateModal:!1,selectedDuties:[],isLoading:!0,fields:[{key:"name"},{key:"nationality"},{key:"gender"},{key:"age"},{key:"current_location"},{key:"status"},{key:"is_approved"},{key:"actions",sorter:!1,filter:!1}],status:["active","inactive"],formData:Object.assign({},f),external_url:i["a"].list,duties:[]}},beforeRouteUpdate:function(e,t,n){var a=this;this.columnFilters=e.query,this.$nextTick((function(){a.fetchItems()})),n()},created:function(){var e=this;s["a"].get(c["a"].all).then((function(t){var n=t.data;return e.duties=n}))},computed:{RouteName:function(){return m["a"]},canListUsers:function(){var e="user.hello";return this.$store.getters.can(e)},permissions:function(){return this.$store.getters.permissions}},methods:{submit:function(){var e=this;console.log("before form submit",this.formData),s["a"].post(i["a"].store,this.formData).then((function(){return e.$toasted.success("New applicant created")})).then((function(){return e.showCreateModal=!1})).then((function(){return e.formData=u.a.cloneDeep(f)})).then((function(){return e.updateColumnFilter({type:null})})).catch((function(t){return e.$toasted.error("Cannot create applicant. "+t.message)}))},deleteApplicant:function(e){var t=this;confirm("Are you sure you want to delete this applicant?")&&s["a"].delete(i["a"].delete(e.id)).then((function(){return t.$toasted.success("Applicant deleted")})).then((function(){return t.updateColumnFilter({type:null})})).catch((function(e){return t.$toasted.error("Cannot delete applicant. "+e.message)}))},searchSelectedDuties:function(){this.columnFilters["duties"]=this.selectedDuties,this.updateColumnFilter({type:null})}}},g=v,h=(n("c6cc"),n("2877")),_=Object(h["a"])(g,a,r,!1,null,null,null);t["default"]=_.exports},c6cc:function(e,t,n){"use strict";n("21e0")},d322:function(e,t,n){"use strict";var a={all:"/api/agencycore/duties/all",list:"/api/agencycore/duties",store:"/api/agencycore/duties",update:function(e){return"/api/agencycore/duties/".concat(e)},delete:function(e){return"/api/agencycore/duties/".concat(e)}};t["a"]=a},da93:function(e,t,n){}}]);