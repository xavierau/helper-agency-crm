(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-29dd3783"],{3227:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"WorkflowIndex"},[a("CCard",[a("CCardHeader",{staticClass:"d-flex justify-content-between align-content-center"},[a("h5",{staticClass:"m-0"},[t._v("Contract Documents")]),a("button",{staticClass:"btn btn-sm btn-success",on:{click:function(e){t.showCreateModal=!t.showCreateModal}}},[a("i",{staticClass:"fa fa-plus"}),t._v(" Document ")])]),t.items?a("CCardBody",[t.paginator?a("CCardBody",[a("CDataTable",{attrs:{items:t.items,fields:t.fields,loading:t.isLoading,hover:"","items-per-page":t.pageSize,"items-per-page-select":{external:!0},"column-filter":{external:!0,lazy:!0},"table-filter":{external:!0,lazy:!0},sorter:{external:!0,resetable:!0}},on:{"pagination-change":t.updatePerPageItems,"update:table-filter-value":t.updateTableFilter,"update:column-filter-value":t.updateColumnFilter,"update:sorter-value":t.updateSorter},scopedSlots:t._u([{key:"actions",fn:function(t){t.item;return[a("td",[a("button",{staticClass:"btn btn-sm btn-danger"},[a("i",{staticClass:"fas fa-trash-alt"})])])]}}],null,!1,811200062)}),a("CPagination",{attrs:{activePage:t.paginationObject.activePage,pages:t.paginationObject.pages},on:{"update:activePage":t.updateActivePage}})],1):t._e()],1):a("CCardBody",[a("h4",[t._v("Loading...")])])],1),a("CModal",{attrs:{show:t.showCreateModal,title:"Create New Contract Document",color:"success",static:"",size:"xl"},on:{"update:show":function(e){t.showCreateModal=e}},scopedSlots:t._u([{key:"footer",fn:function(){return[a("button",{staticClass:"btn btn-success",on:{click:t.submit}},[t._v("Create")])]},proxy:!0}])},[a("contract-doc-form",{attrs:{"form-data":t.formData},on:{"update:formData":function(e){t.formData=e},"update:form-data":function(e){t.formData=e}}})],1),a("CModal",{attrs:{show:t.showEditModal,title:"Edit Contract Date",color:"success",static:"",size:"xl"},on:{"update:show":function(e){t.showEditModal=e}},scopedSlots:t._u([{key:"footer",fn:function(){return[a("button",{staticClass:"btn btn-success",on:{click:t.update}},[t._v("Update")])]},proxy:!0}])},[t.selectedContractDate?a("contract-doc-form",{attrs:{"form-data":t.selectedContractDate},on:{"update:formData":function(e){t.selectedContractDate=e},"update:form-data":function(e){t.selectedContractDate=e}}}):t._e()],1)],1)},r=[],o={list:"/api/agencycontractdoc/contract_docs",store:"/api/agencycontractdoc/contract_docs",update:function(t){return"/api/agencycontractdoc/contract_docs/".concat(t)},destroy:function(t){return"/api/agencycontractdoc/contract_docs/".concat(t)}},c=o,i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"form-group"},[a("label",[t._v("Label")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.label,expression:"formData.label"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.formData.label},on:{input:function(e){e.target.composing||t.$set(t.formData,"label",e.target.value)}}})])])},s=[],u={name:"ContractDocForm",props:{formData:{type:Object,required:!0}}},l=u,d=a("2877"),f=Object(d["a"])(l,i,s,!1,null,"6c0f0c1c",null),p=f.exports,m=a("7ed9"),h=a("8db4"),b={name:"ContractDateIndex",components:{ContractDocForm:p},mixins:[h["a"]],data:function(){return{showCreateModal:!1,showEditModal:!1,isLoading:!0,selectedContractDate:null,fields:[{key:"label"},{key:"actions",sorter:!1,filter:!1}],formData:{label:null},external_url:c.list}},methods:{editContractDate:function(t){this.selectedContractDate=t,this.showEditModal=!0},deleteContractDate:function(t){var e=this;confirm("Are your sure to delete the contract date")&&m["a"].delete(c.destroy(t.id)).then((function(){return e.items=e.items.filter((function(e){return e.id!==t.id}))})).then((function(){return e.$toasted.success("Contract date deleted!")})).catch((function(t){return e.$toasted.error(t.message)}))},update:function(){var t=this;m["a"].put(c.update(this.selectedContractDate.id),this.selectedContractDate).then((function(e){var a=e.data;return t.items=t.items.map((function(t){return t.id===a.id?a:t}))})).then((function(){return t.selectedContractDate={label:null}})).then((function(){return t.showEditModal=!1})).then((function(){return t.$toasted.success("Contract date updated!")})).catch((function(e){return t.$toasted.error(e.message)}))},submit:function(){var t=this;m["a"].post(c.list,this.formData).then((function(e){var a=e.data;return t.items.push(a)})).then((function(){return t.formData={label:null}})).then((function(){return t.showCreateModal=!1})).then((function(){return t.$toasted.success("Contract date created!")})).catch((function(e){return t.$toasted.error(e.message)}))}}},g=b,v=Object(d["a"])(g,n,r,!1,null,"51ce9180",null);e["default"]=v.exports},"8db4":function(t,e,a){"use strict";var n=a("7ed9"),r=a("2ef0");function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function c(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function i(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?c(Object(a),!0).forEach((function(e){s(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function s(t,e,a){return e=u(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function u(t){var e=l(t,"string");return"symbol"==o(e)?e:String(e)}function l(t,e){if("object"!=o(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var n=a.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var d={data:function(){return{fields:[],columnFilters:{},sorter:null,pageSize:15,paginator:null,search:null,external_url:null}},computed:{items:function(){return this.paginator?this.paginator.data:null},paginationObject:function(){var t,e,a,n;return{pages:(null===(t=this.paginator)||void 0===t||null===(t=t.meta)||void 0===t?void 0:t.last_page)||(null===(e=this.paginator)||void 0===e?void 0:e.last_page)||0,activePage:(null===(a=this.paginator)||void 0===a||null===(a=a.meta)||void 0===a?void 0:a.current_page)||(null===(n=this.paginator)||void 0===n?void 0:n.current_page)||0}}},created:function(){this.fetchItems()},methods:{fetchItems:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.columnFilters=this.$route.query;var a=Object.keys(this.columnFilters).reduce((function(e,a){var n;t.columnFilters[a]&&Object(r["isArray"])(t.columnFilters[a])?e["filter[".concat(a,"]")]=[null===(n=t.columnFilters[a])||void 0===n?void 0:n.join(",")]:e["filter[".concat(a,"]")]=t.columnFilters[a];return e}),{}),o={params:i(i({"filter[search]":this.search,pageSize:this.pageSize,sort:this.sorter},a),e)};n["a"].get(this.external_url,o).then((function(e){var a=e.data;return t.paginator=a})).catch((function(t){return console.log(t)})).finally((function(){return t.isLoading=!1}))},updateTableFilter:function(t){this.search=t,this.fetchItems()},updateColumnFilter:function(t){"change"!==t.type&&(this.columnFilters=Object.assign(this.columnFilters,t)),this.fetchItems()},updateSorter:function(t){this.sorter=t.asc?t.column:"-".concat(t.column),this.fetchItems()},updatePerPageItems:function(t){this.pageSize=t,this.fetchItems()},updateActivePage:function(t){this.fetchItems({page:t})}}};e["a"]=d}}]);