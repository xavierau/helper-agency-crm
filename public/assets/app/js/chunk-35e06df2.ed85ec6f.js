(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-35e06df2"],{1374:function(t,e,n){"use strict";n("1792")},1792:function(t,e,n){},b23f:function(t,e,n){"use strict";var a={pages:"/api/cms/pages",get_page_content:function(t){return"/api/cms/pages/".concat(t,"/contents")},update_page_content:function(t,e){return"/api/cms/pages/".concat(t,"/contents/").concat(e)},common_contents:"/api/cms/common_contents",common_content:function(t){return"/api/cms/common_contents/".concat(t)},update_common_content:function(t){return"/api/cms/common_contents/".concat(t)},list_news:"/api/cms/news",create_news:"/api/cms/news",get_news:function(t){return"/api/cms/news/".concat(t)}};e["a"]=a},f85b:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"PageContent"},[n("CCard",[n("CCardHeader",{staticClass:"d-flex justify-content-between align-content-center"},[n("h5",{staticClass:"m-0"},[t._v("Edit Page Content")])]),t.page?n("CCardBody",t._l(t.keys,(function(e){return n("CCard",{key:e},[n("CCardHeader",{on:{click:function(n){return n.preventDefault(),t.selectCard(e)}}},[t._v(t._s(e)+" ")]),n("CCardBody",{directives:[{name:"show",rawName:"v-show",value:t.isSelectedCard(e),expression:"isSelectedCard(key)"}]},[n("form",{staticClass:"form",on:{submit:function(n){return n.preventDefault(),t.updateContent(n,e)}}},[n("CTabs",{attrs:{variant:"pills","active-tab":0}},[n("CTab",{staticClass:"mb-1",attrs:{title:"English"}},[n("div",{staticClass:"form-group"},[n("input",{staticClass:"form-control form-control-sm",attrs:{name:"en_content"},domProps:{value:t.getContentValue(e,"en")}})])]),n("CTab",{attrs:{title:"中文"}},[n("div",{staticClass:"form-group"},[n("input",{staticClass:"form-control form-control-sm",attrs:{name:"zh_content"},domProps:{value:t.getContentValue(e,"zh")}})])])],1),n("button",{staticClass:"btn btn-sm btn-success",attrs:{type:"submit"}},[t._v("Update ")])],1)])],1)})),1):t._e()],1)],1)},s=[],o=n("b23f"),c=n("7ed9"),r={name:"PageContent",data:function(){return{selectedCard:null,page:null}},computed:{keys:function(){return this.page?this.page.contents.reduce((function(t,e){return-1===t.indexOf(e.key)&&t.push(e.key),t}),[]):[]}},created:function(){var t=this;c["a"].get(o["a"].get_page_content(this.$route.params.id)).then((function(e){var n=e.data;return t.page=n}))},methods:{updateContent:function(t,e){var n=this,a={zh_content:t.target.zh_content.value,en_content:t.target.en_content.value};console.log(a),c["a"].put(o["a"].update_page_content(this.$route.params.id,e),a).then((function(){return n.$toasted.success("Content Updated")})).then((function(t){return n.$toasted.error(t.message)}))},getContentValue:function(t,e){var n=this.page.contents.find((function(n){return n.key===t&&n.language===e}));return n?n.content:null},selectCard:function(t){console.log("trigger"),this.selectedCard===t?this.selectedCard=null:this.selectedCard=t},isSelectedCard:function(t){return this.selectedCard===t},submit:function(){var t=this;c["a"].get(o["a"].get_page_content(this.$route.params.id)).then((function(e){var n=e.data;return t.$router.push({name:"Contract",params:{id:n.contract_id}})})).then((function(){return t.$toasted.success("New Invoice Created")})).catch((function(e){return t.$toasted.error("Something wrong, "+e.message)}))}}},i=r,u=(n("1374"),n("2877")),d=Object(u["a"])(i,a,s,!1,null,"b4357d5e",null);e["default"]=d.exports}}]);